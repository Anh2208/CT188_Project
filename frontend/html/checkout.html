<!DOCTYPE html>
<html lang="vi" class="h-100">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/bootstrap.checkout.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Custom css - Các file css do chúng ta tự viết -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/user.css">
    <link rel="stylesheet" href="../css/checkout.css" type="text/css">
</head>

<body>
    <!-- header -->
    <header class="header" style="margin-top: 0;">
        <a href="./Homepage.html" class="logo"><i class="fas fa-shopping-basket"></i>TAT Shop</a>
        <nav class="navbar">
            <a href="./Homepage.html">Trang Chủ</a>
            <a href="#products">Sản Phẩm</a>
            <a href="#blog">Blog</a>
            <a href="#about">Thông Tin</a>
        </nav>

        <div class="icons">
            <div class="fas fa-bars" id="menu-btn"></div>
            <a class="dropdown-toggle dropdown-toggle-no-caret" href="#" role="button" id="dropdownMenuLink"
                data-bs-toggle="dropdown" aria-expanded="false">
                <div class="fas fa-user" id="login-btn"></div>
            </a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <li><a class="dropdown-item" id="loginButton" href="./Login.html">Đăng Nhập</a></li>
                <li>
                    <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" id="register" href="./register.html">Đăng ký</a></li>
                <li><a class="dropdown-item" id="infoUser" href="./User.html">Trang Cá Nhân</a></li>
                <li><a class="dropdown-item" id="cartUser">Giỏ Hàng</a></li>
                <li><a class="dropdown-item" id="logout" href="./Login.html">Đăng xuất</a></li>
            </ul>
        </div>

    </header>
    <!-- end header -->

    <main role="main">

        <div class="container mt-4">
            <form class="needs-validation" name="frmthanhtoan" method="post" action="#">
                <input type="hidden" name="kh_tendangnhap" value="dnpcuong">

                <div class="py-5 text-center">
                    <img src="../assets/images/payment.png" width="100px"><br>
                    <h2>THANH TOÁN</h2>
                    <p class="lead">Vui lòng kiểm tra thông tin Khách hàng, thông tin Giỏ hàng trước khi Đặt hàng.</p>
                </div>

                <div class="row">
                    <div class="col-md-4 order-md-2 mb-4">
                        <h4 class="d-flex justify-content-between align-items-center mb-3">
                            <span class="text-muted">Giỏ hàng</span>
                            <span class="badge badge-secondary badge-pill">2</span>
                        </h4>
                        <table class="mb-3">
                            <thead class="card_1">
                                <tr class="card_2">
                                    <th>Tên</th>
                                    <th>Giá</th>
                                    <th>SL</th>
                                    <th>Tổng</th>
                                </tr>
                            </thead>
                            <tbody id="cardTableBody" class="card_1">

                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="3">Tổng Tiền:</td>
                                    <td id="totalAmount"></td>
                                </tr>
                            </tfoot>
                        </table>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Mã khuyến mãi">
                        </div>
                    </div>
                    <div class="col-md-8 order-md-1">
                        <h4 class="mb-3">Xác nhận thông tin khách hàng <a style="color: rgb(236, 10, 10);">*</a></h4>

                        <div class="row">
                            <div class="col-md-12">
                                <label for="kh_ten">Họ tên</label>

                                <input type="text" placeholder="VD: Nguyễn Huỳnh Thông" class="form-control"
                                    name="kh_ten" id="username" required>
                            </div>

                            <div class="col-md-12">
                                <label for="kh_gioitinh">Giới tính</label><br>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="male"
                                        value="option1">
                                    <label class="form-check-label" for="male">Anh</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="female"
                                        value="option2">
                                    <label class="form-check-label" for="female">Chị</label>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label for="kh_diachi">Địa chỉ</label>
                                <input type="text"
                                    placeholder="VD: Số nhà 123, Phường Xuân Khánh, Quận Ninh Kiều, TP Cần Thơ"
                                    class="form-control" name="kh_diachi" id="kh_diachi" required>
                            </div>
                            <div class="col-md-12">
                                <label for="kh_dienthoai">Điện thoại</label>
                                <input type="text" placeholder="0123456789" class="form-control" name="kh_dienthoai"
                                    id="phone" required>
                            </div>

                        </div>
                        <br>

                        <h4 class="mb-3">Hình thức thanh toán <a style="color: rgb(236, 10, 10);">*</a></h4>

                        <div class="d-block my-3">
                            <div class="custom-control custom-radio">
                                <input id="httt-1" name="httt_ma" type="radio" class="custom-control-input" required=""
                                    value="1" checked="true">
                                <label class="custom-control-label" for="httt-1">Tiền mặt</label>
                            </div>
                            <div class="custom-control custom-radio">
                                <input id="httt-2" name="httt_ma" type="radio" class="custom-control-input" required=""
                                    value="2">
                                <label class="custom-control-label" for="httt-2">Chuyển khoản</label>
                            </div>
                        </div>
                        <hr class="mb-4">
                        <button class="btn btn-primary btn-lg btn-block" type="submit" id="btnDatHang"
                            name="btnDatHang">Đặt
                            hàng</button>
                    </div>
                </div>
            </form>

        </div>


    </main>

    <!-- footer -->
    <footer class="text-center text-lg-start" style="background-color: #0b3288; margin-top: 50px;">
        <div>
            <div class="container d-flex justify-content-center py-5">
                <button type="button" onclick="location.href='https://facebook.com'"
                    class="btn btn-primary btn-lg btn-floating mx-2">
                    <i class="fab fa-facebook"></i>
                </button>
                <button type="button" onclick="location.href='https://youtube.com'"
                    class="btn btn-primary btn-lg btn-floating mx-2">
                    <i class=" fab fa-youtube"></i>
                </button>
                <button type="button" onclick="location.href='https://instagram.com'"
                    class="btn btn-primary btn-lg btn-floating mx-2">
                    <i class="fab fa-instagram"></i>
                </button>
                <button type="button" onclick="location.href='https://twitter.com'"
                    class="btn btn-primary btn-lg btn-floating mx-2">
                    <i class="fab fa-twitter"></i>
                </button>
            </div>
        </div>

        <!-- Copyright -->
        <div class="text-center text-white p-3" style="background-color: rgba(16, 6, 68, 0.459);">
            © 2023 Copyright:
            <a class="text-white">Cảm ơn bạn đã lựa chọn chúng tôi</a>
        </div>
        <!-- Copyright -->
    </footer>
    <!-- end footer -->


</body>
<script>
    // Lấy thông tin listCards từ localStorage
    let listCards = JSON.parse(localStorage.getItem("listCards"));

    // Tạo biến lưu tổng số tiền
    let totalAmount = 0;

    // Lặp qua từng phần tử trong listCards để thêm vào bảng
    listCards.forEach(function (card) {
        // Tính tổng tiền của thẻ
        if (card == null) {

        }
        else {
            let cardTotal = card.price * card.quantity;

            // Thêm dòng vào bảng
            let newRow = document.createElement("tr");
            newRow.innerHTML = `
            <td>${card.name}</td>
            <td>${card.price}</td>
            <td>x${card.quantity}</td>
            <td>=${cardTotal}</td>
        `;
            document.getElementById("cardTableBody").appendChild(newRow);

            // Cộng tổng tiền vào biến totalAmount
            totalAmount += cardTotal;
        }
    });

    // Hiển thị tổng tiền
    document.getElementById("totalAmount").textContent = totalAmount;
    const submit = document.querySelector("#btnDatHang");
    submit.addEventListener("click", function () {
        alert("Đặt Hàng thành công")
        localStorage.removeItem("listCards");
        window.location.href = "Homepage.html";
    });


    if (localStorage.getItem("user")) {
        console.log(localStorage.getItem("user"));
        const user = JSON.parse(localStorage.getItem("user"));
        const userName = user.username;
        const userPhone = user.phone;
        const userSex = user.sex;

        document.getElementById("username").value = userName;
        document.getElementById("phone").value = userPhone;
        if (userSex == "female") {
            document.getElementById("female").checked = true;
        } else {
            document.getElementById("male").checked = true;
        }
    }
</script>
<script src="../js/header.js"></script>

</html>